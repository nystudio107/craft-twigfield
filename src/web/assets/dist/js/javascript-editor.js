/*!
 * @project        twigfield
 * @name           javascript-editor.js
 * @author         Andrew Welch
 * @build          Wed Oct 26 2022 04:17:52 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[339],{5092:function(e,t,n){n(7941),n(2526),n(5003),n(4747),n(9337);var o=n(4942),i=(n(4916),n(3123),n(3210),n(5306),n(7327),n(1539),n(713)),r=n(8152),a=n(1002);n(6699),n(2023),n(6755),n(6992),n(8783),n(3948),n(1637),n(9714),n(9720),n(8309);function l(e){return e[e.length-1]}function s(e,t,n){monaco.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(o,i,r){var s=[],d=e,u=o.getValueInRange({startLineNumber:i.lineNumber,startColumn:0,endLineNumber:i.lineNumber,endColumn:i.column}),c=!0;if(-1===u.lastIndexOf("{")&&(c=!1),-1!==u.substring(u.lastIndexOf("{")).indexOf("}")&&(c=!1),!c&&"TwigExpressionAutocomplete"===t)return null;var m=u.replace("\t","").split(" "),g=m[m.length-1];g.includes("{")&&(g=l(g.split("{"))),g.includes("(")&&(g=l(g.split("("))),g.includes(">")&&(g=l(g.split(">")));var f="."===g.charAt(g.length-1);if(f&&"TwigExpressionAutocomplete"!==t)return null;if(c&&"TwigExpressionAutocomplete"===t&&f){if(!n)return null;var p=g.substring(0,g.length-1).split(".");if(void 0!==e[p[0]]){d=e[p[0]];for(var v=1;v<p.length;v++){if(!d.hasOwnProperty(p[v]))return s;d=d[p[v]]}}}if(void 0!==d)for(var h in d)if(d.hasOwnProperty(h)&&!h.startsWith("__")){var w=d[h].__completions;if(void 0!==w){if(delete w.range,"documentation"in w&&"object"!==(0,a.Z)(w.documentation)){var b=w.documentation;w.documentation={value:b,isTrusted:!0,supportsHtml:!0}}s.push(w)}}return{suggestions:s}}})}function d(e,t,n){monaco.languages.registerHoverProvider("twig",{provideHover:function(t,n){var o={},i=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:0,endLineNumber:n.lineNumber,endColumn:t.getLineMaxColumn(n.lineNumber)}),r=t.getWordAtPosition(n);if(null!==r){for(var l=i.substring(0,r.endColumn-1),s=!1,d=e,u=l.length;u>=0;u--)if(" "===l[u]){l=i.substring(u+1,l.length);break}if(l.includes(".")&&(s=!0),s)for(var c=l.substring(0,l.length).split("."),m=0;m<c.length-1;m++){var g=c[m].replace(/[{(<]/,"");if(!d.hasOwnProperty(g))return o;d=d[g]}if(void 0!==d&&void 0!==d[r.word]){var f=d[r.word].__completions;if(void 0!==f){var p=f.documentation;return"object"===(0,a.Z)(f.documentation)&&(p=f.documentation.value),{range:new monaco.Range(n.lineNumber,r.startColumn,n.lineNumber,r.endColum),contents:[{value:"**"+f.detail+"**"},{value:p}]}}}return o}}})}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Twigfield",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=new URLSearchParams;void 0!==e&&o.set("fieldType",e),void 0!==t&&o.set("twigfieldOptions",t);var i=n.includes("?")?"&":"?";if(void 0===window.twigfieldFieldTypes&&(window.twigfieldFieldTypes={}),!(e in window.twigfieldFieldTypes)){window.twigfieldFieldTypes[e]=e;var a=new XMLHttpRequest;a.open("GET",n+i+o.toString(),!0),a.onload=function(){if(a.status>=200&&a.status<400){var e=JSON.parse(a.responseText);void 0===window.monacoAutocompleteItems&&(window.monacoAutocompleteItems={});for(var t=0,n=Object.entries(e);t<n.length;t++){var o=(0,r.Z)(n[t],2),i=(o[0],o[1]);i.name in window.monacoAutocompleteItems||(window.monacoAutocompleteItems[i.name]=i.name,s(i.__completions,i.type,i.hasSubProperties),d(i.__completions,i.type))}}else console.log("Autocomplete endpoint failed with status "+a.status)},a.send()}}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,o.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}""===n.p&&(n.p=window.twigfieldBaseAssetsUrl);var g={language:"twig",theme:"vs",automaticLayout:!0,tabIndex:0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:!1,wordWrap:!0,scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}};function f(e,t,n,o,r,a){var l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",s=document.getElementById(e),d=document.createElement("div"),c=JSON.parse(r),f=e+"-monaco-editor-placeholder";d.id=e+"-monaco-editor",d.classList.add("relative","box-content","monaco-editor-twigfield","h-full");var p=document.createElement("div");if(p.classList.add("monaco-editor-twigfield--icon"),p.setAttribute("title",Craft.t("twigfield","Twig code is supported.")),p.setAttribute("aria-hidden","true"),p.innerHTML='<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 320 320" style="enable-background:new 0 0 320 320;" xml:space="preserve">\n<style type="text/css">.st0{fill:currentcolor;}</style>\n<g>\n\t<path class="st0" d="M128,35.6c-17.7,0-32,15.9-32,35.6v35.6c0,29.5-21.5,53.3-48,53.3c26.5,0,48,23.9,48,53.3v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V320H96c-35.3,0-64-31.9-64-71.1v-35.6c0-19.6-14.3-35.6-32-35.6v-35.6c17.7,0,32-15.9,32-35.6V71.1\n\t\tC32,31.9,60.7,0,96,0h32V35.6L128,35.6z"/>\n\t<path class="st0" d="M320,177.8c-17.7,0-32,15.9-32,35.6v35.6c0,39.2-28.7,71.1-64,71.1h-32v-35.6c17.7,0,32-15.9,32-35.6v-35.6\n\t\tc0-29.5,21.5-53.3,48-53.3c-26.5,0-48-23.9-48-53.3V71.1c0-19.6-14.3-35.6-32-35.6V0h32c35.3,0,64,31.9,64,71.1v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V177.8L320,177.8z"/>\n</g>\n</svg>',d.appendChild(p),""!==n){var v=d.classList,h=n.trim().split(/\s+/);v.add.apply(v,h)}if(""!==l){var w=document.createElement("div");w.id=e+"-monaco-editor-placeholder",w.innerHTML=l,w.classList.add("monaco-placeholder","p-2"),d.appendChild(w)}s.parentNode.insertBefore(d,s),s.style.display="none";var b=m(m(m({},g),JSON.parse(o)),{value:s.value}),y=i.editor.create(d,b);if(y.onDidChangeModelContent((function(e){s.value=y.getValue()})),"singleLineEditor"in c&&c.singleLineEditor){var C=y.getModel();console.log(c);var O=C.getValue();C.setValue(O.replace(/\s\s+/g," ")),y.addCommand(i.KeyMod.CtrlCmd|i.KeyCode.KeyF,(function(){})),y.addCommand(i.KeyCode.Enter,(function(){}),"!suggestWidgetVisible"),y.addCommand(i.KeyCode.Tab,(function(){L()})),y.addCommand(i.KeyMod.Shift|i.KeyCode.Tab,(function(){E()})),y.onDidPaste((function(e){for(var t="",n=C.getLineCount(),o=0;o<n;o+=1)t+=C.getLineContent(o+1);t=t.replace(/\s\s+/g," "),C.setValue(t),y.setPosition({column:t.length+1,lineNumber:1})}))}u(t,r,a);var x=function(){var e=y.getLayoutInfo().width,t=Math.min(1e3,y.getContentHeight());d.style.height="".concat(t,"px");try{!0,y.layout({width:e,height:t})}finally{!1}};function L(){var e=M(),t=e.indexOf(document.activeElement);t>-1&&(e[t+1]||e[0]).focus()}function E(){var e=M(),t=e.indexOf(document.activeElement);t>-1&&(e[t-1]||e[e.length]).focus()}function M(){var e=[];return document.activeElement&&document.activeElement.form&&(e=Array.prototype.filter.call(document.activeElement.form.querySelectorAll('a:not([disabled]), button:not([disabled]), select:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])'),(function(e){return e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement}))),e}function N(e,t){""===t&&(document.querySelector(e).style.display="initial")}function P(e){document.querySelector(e).style.display="none"}y.onDidContentSizeChange(x),x(),""!==l&&(N("#"+f,y.getValue()),y.onDidBlurEditorWidget((function(){N("#"+f,y.getValue())})),y.onDidFocusEditorWidget((function(){P("#"+f)})))}window.makeMonacoEditor=f},9086:function(){}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[216,532],(function(){return t(5092),t(9086),t(1828)}));e.O()}]);
//# sourceMappingURL=javascript-editor.js.map