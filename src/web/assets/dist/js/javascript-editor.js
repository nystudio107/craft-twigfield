/*!
 * @project        twigfield
 * @name           javascript-editor.js
 * @author         Andrew Welch
 * @build          Thu Oct 27 2022 04:01:57 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[339],{9086:function(){},6220:function(e,t,n){var o=n(713),i=n(8152),l=n(1002);n(4916),n(5306),n(6699),n(2023),n(3157),n(6992),n(1539),n(8783),n(3948),n(1637),n(9714),n(9720),n(8309);function a(e){return e[e.length-1]}function r(e,t,n){monaco.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(o,i,r){var s=[],d=e,u=o.getValueInRange({startLineNumber:i.lineNumber,startColumn:0,endLineNumber:i.lineNumber,endColumn:i.column}),c=!0;if(-1===u.lastIndexOf("{")&&(c=!1),-1!==u.substring(u.lastIndexOf("{")).indexOf("}")&&(c=!1),!c&&"TwigExpressionAutocomplete"===t)return null;var m=u.replace("\t","").split(" "),g=m[m.length-1];g.includes("{")&&(g=a(g.split("{"))),g.includes("(")&&(g=a(g.split("("))),g.includes(">")&&(g=a(g.split(">")));var f="."===g.charAt(g.length-1);if(f&&"TwigExpressionAutocomplete"!==t)return null;if(c&&"TwigExpressionAutocomplete"===t&&f){if(!n)return null;var p=g.substring(0,g.length-1).split(".");if(void 0!==e[p[0]]){d=e[p[0]];for(var v=1;v<p.length;v++){if(!d.hasOwnProperty(p[v]))return s;d=d[p[v]]}}}if(void 0!==d)for(var h in d)if(d.hasOwnProperty(h)&&!h.startsWith("__")){var w=d[h].__completions;if(void 0!==w){if(delete w.range,"documentation"in w&&"object"!==(0,l.Z)(w.documentation)){var y=w.documentation;w.documentation={value:y,isTrusted:!0,supportsHtml:!0}}s.push(w)}}return{suggestions:s}}})}function s(e,t,n){monaco.languages.registerHoverProvider("twig",{provideHover:function(t,n){var o={},i=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:0,endLineNumber:n.lineNumber,endColumn:t.getLineMaxColumn(n.lineNumber)}),a=t.getWordAtPosition(n);if(null!==a){for(var r=i.substring(0,a.endColumn-1),s=!1,d=e,u=r.length;u>=0;u--)if(" "===r[u]){r=i.substring(u+1,r.length);break}if(r.includes(".")&&(s=!0),s)for(var c=r.substring(0,r.length).split("."),m=0;m<c.length-1;m++){var g=c[m].replace(/[{(<]/,"");if(!d.hasOwnProperty(g))return o;d=d[g]}if(void 0!==d&&void 0!==d[a.word]){var f=d[a.word].__completions;if(void 0!==f){var p=f.documentation;return"object"===(0,l.Z)(f.documentation)&&(p=f.documentation.value),{range:new monaco.Range(n.lineNumber,a.startColumn,n.lineNumber,a.endColum),contents:[{value:"**"+f.detail+"**"},{value:p}]}}}return o}}})}var d={twig:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 320 320" style="enable-background:new 0 0 320 320;" xml:space="preserve">\n<style type="text/css">.st0{fill:currentcolor;}</style>\n<g>\n\t<path class="st0" d="M128,35.6c-17.7,0-32,15.9-32,35.6v35.6c0,29.5-21.5,53.3-48,53.3c26.5,0,48,23.9,48,53.3v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V320H96c-35.3,0-64-31.9-64-71.1v-35.6c0-19.6-14.3-35.6-32-35.6v-35.6c17.7,0,32-15.9,32-35.6V71.1\n\t\tC32,31.9,60.7,0,96,0h32V35.6L128,35.6z"/>\n\t<path class="st0" d="M320,177.8c-17.7,0-32,15.9-32,35.6v35.6c0,39.2-28.7,71.1-64,71.1h-32v-35.6c17.7,0,32-15.9,32-35.6v-35.6\n\t\tc0-29.5,21.5-53.3,48-53.3c-26.5,0-48-23.9-48-53.3V71.1c0-19.6-14.3-35.6-32-35.6V0h32c35.3,0,64,31.9,64,71.1v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V177.8L320,177.8z"/>\n</g>\n</svg>'};""===n.p&&(n.p=window.twigfieldBaseAssetsUrl);const u={language:"twig",theme:"vs",automaticLayout:!0,tabIndex:0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",wordWrap:"on",scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}};function c(e,t,n,l,a,c,m=""){const g=document.getElementById(e),f=document.createElement("div"),p=JSON.parse(a),v=e+"-monaco-editor-placeholder";if(null===g||null===g.parentNode)return;const h=JSON.parse(l);let w={...u,...h,value:g.value};f.id=e+"-monaco-editor",f.classList.add("relative","box-content","monaco-editor-twigfield","h-full");const y=void 0===w.language?null:d[w.language];if(y){const e=document.createElement("div");e.classList.add("monaco-editor-twigfield--icon"),e.setAttribute("title",Craft.t("twigfield","Twig code is supported.")),e.setAttribute("aria-hidden","true"),e.innerHTML=y,f.appendChild(e)}if(""!==n){const e=f.classList,t=n.trim().split(/\s+/);e.add.apply(e,t)}if(""!==m){let t=document.createElement("div");t.id=e+"-monaco-editor-placeholder",t.innerHTML=m,t.classList.add("monaco-placeholder","p-2"),f.appendChild(t)}g.parentNode.insertBefore(f,g),g.style.display="none";let b=o.editor.create(f,w);if(b.onDidChangeModelContent((e=>{g.value=b.getValue()})),"singleLineEditor"in p&&p.singleLineEditor){const e=b.getModel();if(null!==e){const t=e.getValue();e.setValue(t.replace(/\s\s+/g," ")),b.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.KeyF,(()=>{})),b.addCommand(o.KeyCode.Enter,(()=>{}),"!suggestWidgetVisible"),b.addCommand(o.KeyCode.Tab,(()=>{!function(){var e=L(),t=e.indexOf(document.activeElement);if(t>-1){(e[t+1]||e[0]).focus()}}()})),b.addCommand(o.KeyMod.Shift|o.KeyCode.Tab,(()=>{!function(){var e=L(),t=e.indexOf(document.activeElement);if(t>-1){(e[t-1]||e[e.length]).focus()}}()})),b.onDidPaste((t=>{let n="";const o=e.getLineCount();for(let t=0;t<o;t+=1)n+=e.getLineContent(t+1);n=n.replace(/\s\s+/g," "),e.setValue(n),b.setPosition({column:n.length+1,lineNumber:1})}))}}!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Twigfield",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,o=new URLSearchParams;void 0!==e&&o.set("fieldType",e),void 0!==t&&o.set("twigfieldOptions",t);var l=n.includes("?")?"&":"?";if(void 0===window.twigfieldFieldTypes&&(window.twigfieldFieldTypes={}),!(e in window.twigfieldFieldTypes)){window.twigfieldFieldTypes[e]=e;var a=new XMLHttpRequest;a.open("GET",n+l+o.toString(),!0),a.onload=function(){if(a.status>=200&&a.status<400){var e=JSON.parse(a.responseText);void 0===window.monacoAutocompleteItems&&(window.monacoAutocompleteItems={});for(var t=0,n=Object.entries(e);t<n.length;t++){var o=(0,i.Z)(n[t],2),l=(o[0],o[1]);l.name in window.monacoAutocompleteItems||(window.monacoAutocompleteItems[l.name]=l.name,r(l.__completions,l.type,l.hasSubProperties),s(l.__completions,l.type))}}else console.log("Autocomplete endpoint failed with status "+a.status)},a.send()}}(t,a,c);let C=!1;const x=()=>{const e=b.getLayoutInfo().width,t=Math.min(1e3,b.getContentHeight());f.style.height=`${t}px`;try{C=!0,b.layout({width:e,height:t})}finally{C=!1}};function L(){var e=[];const t=document.activeElement;return t&&t.form&&(e=Array.prototype.filter.call(t.form.querySelectorAll('a:not([disabled]), button:not([disabled]), select:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])'),(function(e){return e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement}))),e}function M(e,t){if(""===t){const t=document.querySelector(e);null!==t&&(t.style.display="initial")}}b.onDidContentSizeChange(x),x(),""!==m&&(M("#"+v,b.getValue()),b.onDidBlurEditorWidget((()=>{M("#"+v,b.getValue())})),b.onDidFocusEditorWidget((()=>{!function(e){const t=document.querySelector(e);null!==t&&(t.style.display="none")}("#"+v)})))}window.makeMonacoEditor=c}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[216,532],(function(){return t(6220),t(9086),t(1828)}));e.O()}]);
//# sourceMappingURL=javascript-editor.js.map