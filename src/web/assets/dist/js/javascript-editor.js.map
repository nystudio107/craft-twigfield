{"version":3,"file":"js/javascript-editor.js","mappings":"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","sources":["webpack://Buildchain/../src/web/assets/src/js/autocomplete.js","webpack://Buildchain/../src/web/assets/src/js/twigfield.js"],"sourcesContent":["/**\n * Twigfield Craft CMS\n *\n * Provides a twig editor field with Twig & Craft API autocomplete\n *\n * @link      https://nystudio107.com\n * @copyright Copyright (c) 2022 nystudio107\n */\n\n/**\n * @author    nystudio107\n * @package   Twigfield\n * @since     1.0.0\n */\nconst COMPLETION_KEY = '__completions';\n\n/**\n * Get the last item from the array\n *\n * @param arr\n * @returns {*}\n */\nfunction getLastItem(arr) {\n  return arr[arr.length - 1];\n}\n\n/**\n * Register completion items with the Monaco editor, for the Twig language\n *\n * @param completionItems array of completion items, with sub-properties in `COMPLETION_KEY`\n * @param autocompleteType the type of autocomplete, either `TwigExpressionAutocomplete` or `GeneralAutocomplete`\n * @param hasSubProperties where the autocomplete has sub-properties, and should be parsed as such\n */\nfunction addCompletionItemsToMonaco(completionItems, autocompleteType, hasSubProperties) {\n  monaco.languages.registerCompletionItemProvider('twig', {\n    triggerCharacters: ['.', '('],\n    provideCompletionItems: function (model, position, token) {\n      let result = [];\n      let currentItems = completionItems;\n      // Get the last word the user has typed\n      const currentLine = model.getValueInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: 0,\n        endLineNumber: position.lineNumber,\n        endColumn: position.column\n      });\n      let inTwigExpression = true;\n      // Ensure we're inside of a Twig expression\n      if (currentLine.lastIndexOf('{') === -1) {\n        inTwigExpression = false;\n      }\n      const startExpression = currentLine.substring(currentLine.lastIndexOf('{'));\n      if (startExpression.indexOf('}') !== -1) {\n        inTwigExpression = false;\n      }\n      // We are not in a Twig expression, and this is a TwigExpressionAutocomplete, return nothing\n      if (!inTwigExpression && autocompleteType === 'TwigExpressionAutocomplete') {\n        return null;\n      }\n      // Get the current word we're typing\n      const currentWords = currentLine.replace(\"\\t\", \"\").split(\" \");\n      let currentWord = currentWords[currentWords.length - 1];\n      // If the current word includes { or ( or >, split on that, too, to allow the autocomplete to work in nested functions and HTML tags\n      if (currentWord.includes('{')) {\n        currentWord = getLastItem(currentWord.split('{'));\n      }\n      if (currentWord.includes('(')) {\n        currentWord = getLastItem(currentWord.split('('));\n      }\n      if (currentWord.includes('>')) {\n        currentWord = getLastItem(currentWord.split('>'));\n      }\n      const isSubProperty = currentWord.charAt(currentWord.length - 1) === \".\";\n      // If we're in a sub-property (following a .) don't present non-TwigExpressionAutocomplete items\n      if (isSubProperty && autocompleteType !== 'TwigExpressionAutocomplete') {\n        return null;\n      }\n      // We are in a Twig expression, handle TwigExpressionAutocomplete by walking through the properties\n      if (inTwigExpression && autocompleteType === 'TwigExpressionAutocomplete') {\n        // If the last character typed is a period, then we need to look up a sub-property of the completionItems\n        if (isSubProperty) {\n          // If we're in a sub-property, and this autocomplete doesn't have sub-properties, don't return its items\n          if (!hasSubProperties) {\n            return null;\n          }\n          // Is a sub-property, get a list of parent properties\n          const parents = currentWord.substring(0, currentWord.length - 1).split(\".\");\n          if (typeof completionItems[parents[0]] !== 'undefined') {\n            currentItems = completionItems[parents[0]];\n            // Loop through all the parents to traverse the completion items and find the current one\n            for (let i = 1; i < parents.length; i++) {\n              if (currentItems.hasOwnProperty(parents[i])) {\n                currentItems = currentItems[parents[i]];\n              } else {\n                return result;\n              }\n            }\n          }\n        }\n      }\n      // Get all the child properties\n      if (typeof currentItems !== 'undefined') {\n        for (let item in currentItems) {\n          if (currentItems.hasOwnProperty(item) && !item.startsWith(\"__\")) {\n            const completionItem = currentItems[item][COMPLETION_KEY];\n            if (typeof completionItem !== 'undefined') {\n              // Monaco adds a 'range' to the object, to denote where the autocomplete is triggered from,\n              // which needs to be removed each time the autocomplete objects are re-used\n              delete completionItem.range;\n              if ('documentation' in completionItem && typeof completionItem.documentation !== 'object') {\n                let docs = completionItem.documentation;\n                completionItem.documentation = {\n                  value: docs,\n                  isTrusted: true,\n                  supportsHtml: true\n                }\n              }\n              // Add to final results\n              result.push(completionItem);\n            }\n          }\n        }\n      }\n\n      return {\n        suggestions: result\n      };\n    }\n  });\n}\n\n/**\n * Register hover items with the Monaco editor, for the Twig language\n *\n * @param completionItems array of completion items, with sub-properties in `COMPLETION_KEY`\n * @param autocompleteType the type of autocomplete, either `TwigExpressionAutocomplete` or `GeneralAutocomplete`\n * @param hasSubProperties where the autocomplete has sub-properties, and should be parsed as such\n */\nfunction addHoverHandlerToMonaco(completionItems, autocompleteType, hasSubProperties) {\n  monaco.languages.registerHoverProvider('twig', {\n    provideHover: function (model, position) {\n      let result = {};\n      const currentLine = model.getValueInRange({\n        startLineNumber: position.lineNumber,\n        startColumn: 0,\n        endLineNumber: position.lineNumber,\n        endColumn: model.getLineMaxColumn(position.lineNumber)\n      });\n      const currentWord = model.getWordAtPosition(position);\n      if (currentWord === null) {\n        return;\n      }\n      let searchLine = currentLine.substring(0, currentWord.endColumn - 1)\n      let isSubProperty = false;\n      let currentItems = completionItems;\n      for (let i = searchLine.length; i >= 0; i--) {\n        if (searchLine[i] === ' ') {\n          searchLine = currentLine.substring(i + 1, searchLine.length);\n          break;\n        }\n      }\n      if (searchLine.includes('.')) {\n        isSubProperty = true;\n      }\n      if (isSubProperty) {\n        // Is a sub-property, get a list of parent properties\n        const parents = searchLine.substring(0, searchLine.length).split(\".\");\n        // Loop through all the parents to traverse the completion items and find the current one\n        for (let i = 0; i < parents.length - 1; i++) {\n          const thisParent = parents[i].replace(/[{(<]/, '');\n          if (currentItems.hasOwnProperty(thisParent)) {\n            currentItems = currentItems[thisParent];\n          } else {\n            return result;\n          }\n        }\n      }\n      if (typeof currentItems !== 'undefined' && typeof currentItems[currentWord.word] !== 'undefined') {\n        const completionItem = currentItems[currentWord.word][COMPLETION_KEY];\n        if (typeof completionItem !== 'undefined') {\n          let docs = completionItem.documentation;\n          if (typeof completionItem.documentation === 'object') {\n            docs = completionItem.documentation.value;\n          }\n          return {\n            range: new monaco.Range(position.lineNumber, currentWord.startColumn, position.lineNumber, currentWord.endColum),\n            contents: [\n              {value: '**' + completionItem.detail + '**'},\n              {value: docs},\n            ]\n          }\n        }\n      }\n\n      return result;\n    }\n  });\n}\n\n/**\n * Fetch the autocompletion items from local storage, or from the endpoint if they aren't cached in local storage\n */\nfunction getCompletionItemsFromEndpoint(fieldType, endpointUrl) {\n  let urlParams = '';\n  if (typeof fieldType !== 'undefined' && fieldType !== null) {\n    urlParams = '?fieldType=' + fieldType;\n  }\n  // Ping the controller endpoint\n  let request = new XMLHttpRequest();\n  request.open('GET', endpointUrl + urlParams, true);\n  request.onload = function () {\n    if (request.status >= 200 && request.status < 400) {\n      const completionItems = JSON.parse(request.responseText);\n      if (typeof window.monacoAutocompleteItems === 'undefined') {\n        window.monacoAutocompleteItems = {};\n      }\n      // Don't add a completion more than once, as might happen with multiple Twigfield instances\n      // on the same page, because the completions are global in Monaco\n      for (const [name, autocomplete] of Object.entries(completionItems)) {\n        if (!(autocomplete.name in window.monacoAutocompleteItems)) {\n          window.monacoAutocompleteItems[autocomplete.name] = autocomplete.name;\n          addCompletionItemsToMonaco(autocomplete.__completions, autocomplete.type, autocomplete.hasSubProperties);\n          addHoverHandlerToMonaco(autocomplete.__completions, autocomplete.type);\n        }\n      }\n    } else {\n      console.log('Autocomplete endpoint failed with status ' + request.status)\n    }\n  };\n  request.send();\n}\n\nexport {getCompletionItemsFromEndpoint};\n","/**\n * Twigfield Craft CMS\n *\n * Provides a twig editor field with Twig & Craft API autocomplete\n *\n * @link      https://nystudio107.com\n * @copyright Copyright (c) 2022 nystudio107\n */\n\n/**\n * @author    nystudio107\n * @package   Twigfield\n * @since     1.0.0\n */\n// Set the __webpack_public_path__ dynamically so we can work inside of cpresources's hashed dir name\n// https://stackoverflow.com/questions/39879680/example-of-setting-webpack-public-path-at-runtime\nif (typeof __webpack_public_path__ !== 'string' || __webpack_public_path__ === '') {\n  __webpack_public_path__ = window.twigfieldBaseAssetsUrl;\n}\n\nimport * as monaco from 'monaco-editor/esm/vs/editor/editor.api';\nimport {getCompletionItemsFromEndpoint} from '@/js/autocomplete.js';\n\n// The default EditorOptions for the Monaco editor instance\n// ref: https://microsoft.github.io/monaco-editor/api/enums/monaco.editor.EditorOption.html\nconst defaultOptions = {\n  language: 'twig',\n  theme: 'vs',\n  automaticLayout: true,\n  // Disable sidebar line numbers\n  lineNumbers: 'off',\n  glyphMargin: false,\n  folding: false,\n  // Undocumented see https://github.com/Microsoft/vscode/issues/30795#issuecomment-410998882\n  lineDecorationsWidth: 0,\n  lineNumbersMinChars: 0,\n  // Disable the current line highlight\n  renderLineHighlight: false,\n  wordWrap: true,\n  scrollBeyondLastLine: false,\n  scrollbar: {\n    vertical: 'hidden',\n    horizontal: 'auto',\n  },\n  fontSize: 14,\n  fontFamily: 'SFMono-Regular, Consolas, \"Liberation Mono\", Menlo, Courier, monospace',\n  minimap: {\n    enabled: false\n  },\n};\n\n// Create the editor\nfunction makeMonacoEditor(elementId, fieldType, wrapperClass, editorOptions, twigfieldOptions, endpointUrl) {\n  const textArea = document.getElementById(elementId);\n  let container = document.createElement('div');\n  let fieldOptions = JSON.parse(twigfieldOptions);\n  // Make a sibling div for the Monaco editor to live in\n  container.id = elementId + '-monaco-editor';\n  container.classList.add('p-2', 'box-content', 'monaco-editor-twigfield-icon', 'h-full');\n  if (wrapperClass !== '') {\n    container.classList.add(wrapperClass);\n  }\n  container.tabIndex = 0;\n  textArea.parentNode.insertBefore(container, textArea);\n  textArea.style.display = 'none';\n  // Create the Monaco editor\n  let options = {...defaultOptions, ...JSON.parse(editorOptions), ...{value: textArea.value}}\n  let editor = monaco.editor.create(container, options);\n  // When the text is changed in the editor, sync it to the underlying TextArea input\n  editor.onDidChangeModelContent((event) => {\n    textArea.value = editor.getValue();\n  });\n  // ref: https://github.com/vikyd/vue-monaco-singleline/blob/master/src/monaco-singleline.vue#L150\n  if ('singleLineEditor' in fieldOptions && fieldOptions.singleLineEditor) {\n    const textModel = editor.getModel();\n    // Remove multiple spaces & tabs\n    const text = textModel.getValue();\n    textModel.setValue(text.replace(/\\s\\s+/g, ' '));\n    // Handle the Find command\n    editor.addCommand(monaco.KeyMod.CtrlCmd | monaco.KeyCode.KeyF, () => {\n    });\n    // Handle typing the Enter key\n    editor.addCommand(monaco.KeyCode.Enter, () => {\n    }, '!suggestWidgetVisible');\n    // Handle Paste\n    editor.onDidPaste((e) => {\n      // multiple rows will be merged to single row\n      let newContent = '';\n      const lineCount = textModel.getLineCount();\n      // remove all line breaks\n      for (let i = 0; i < lineCount; i += 1) {\n        newContent += textModel.getLineContent(i + 1);\n      }\n      // Remove multiple spaces & tabs\n      newContent = newContent.replace(/\\s\\s+/g, ' ');\n      textModel.setValue(newContent);\n      editor.setPosition({column: newContent.length + 1, lineNumber: 1});\n    })\n  }\n  // Get the autocompletion items\n  getCompletionItemsFromEndpoint(fieldType, endpointUrl);\n  // Custom resizer to always keep the editor full-height, without needing to scroll\n  let ignoreEvent = false;\n  const updateHeight = () => {\n    const width = editor.getLayoutInfo().width;\n    const contentHeight = Math.min(1000, editor.getContentHeight());\n    //container.style.width = `${width}px`;\n    container.style.height = `${contentHeight}px`;\n    try {\n      ignoreEvent = true;\n      editor.layout({width, height: contentHeight});\n    } finally {\n      ignoreEvent = false;\n    }\n  };\n  editor.onDidContentSizeChange(updateHeight);\n  updateHeight();\n}\n\nwindow.makeMonacoEditor = makeMonacoEditor;\n\nexport default makeMonacoEditor;\n"],"names":["getLastItem","arr","length","addCompletionItemsToMonaco","completionItems","autocompleteType","hasSubProperties","monaco","languages","registerCompletionItemProvider","triggerCharacters","provideCompletionItems","model","position","token","result","currentItems","currentLine","getValueInRange","startLineNumber","lineNumber","startColumn","endLineNumber","endColumn","column","inTwigExpression","lastIndexOf","substring","indexOf","currentWords","replace","split","currentWord","includes","isSubProperty","charAt","parents","i","hasOwnProperty","item","startsWith","completionItem","range","documentation","docs","value","isTrusted","supportsHtml","push","suggestions","addHoverHandlerToMonaco","registerHoverProvider","provideHover","getLineMaxColumn","getWordAtPosition","searchLine","thisParent","word","Range","endColum","contents","detail","__webpack_public_path__","window","twigfieldBaseAssetsUrl","defaultOptions","language","theme","automaticLayout","lineNumbers","glyphMargin","folding","lineDecorationsWidth","lineNumbersMinChars","renderLineHighlight","wordWrap","scrollBeyondLastLine","scrollbar","vertical","horizontal","fontSize","fontFamily","minimap","enabled","makeMonacoEditor","elementId","fieldType","wrapperClass","editorOptions","twigfieldOptions","endpointUrl","textArea","document","getElementById","container","createElement","fieldOptions","JSON","parse","id","classList","add","tabIndex","parentNode","insertBefore","style","display","options","editor","onDidChangeModelContent","event","getValue","singleLineEditor","textModel","getModel","text","setValue","addCommand","onDidPaste","e","newContent","lineCount","getLineCount","getLineContent","setPosition","urlParams","request","XMLHttpRequest","open","onload","status","responseText","monacoAutocompleteItems","Object","entries","autocomplete","name","__completions","type","console","log","send","getCompletionItemsFromEndpoint","updateHeight","width","getLayoutInfo","contentHeight","Math","min","getContentHeight","height","layout","onDidContentSizeChange"],"sourceRoot":""}