/*!
 * @project        codefield
 * @name           codefield-editor.js
 * @author         Andrew Welch
 * @build          Sat Oct 29 2022 04:37:16 GMT+0000 (Coordinated Universal Time)
 * @copyright      Copyright (c) 2022 Â©2022 nystudio107.com
 *
 */
"use strict";(self.webpackChunkBuildchain=self.webpackChunkBuildchain||[]).push([[141],{6674:function(){},5053:function(e,t,n){var o=n(713);function i(e){return e[e.length-1]}function l(e,t,n){o.languages.registerCompletionItemProvider("twig",{triggerCharacters:[".","("],provideCompletionItems:function(o,l,s){let r=[],a=e;const d=o.getValueInRange({startLineNumber:l.lineNumber,startColumn:0,endLineNumber:l.lineNumber,endColumn:l.column});let c=!0;-1===d.lastIndexOf("{")&&(c=!1);if(-1!==d.substring(d.lastIndexOf("{")).indexOf("}")&&(c=!1),!c&&"TwigExpressionAutocomplete"===t)return null;const u=d.replace("\t","").split(" ");let m=u[u.length-1];m.includes("{")&&(m=i(m.split("{"))),m.includes("(")&&(m=i(m.split("("))),m.includes(">")&&(m=i(m.split(">")));const f="."===m.charAt(m.length-1);if(f&&"TwigExpressionAutocomplete"!==t)return null;if(c&&"TwigExpressionAutocomplete"===t&&f){if(!n)return null;const t=m.substring(0,m.length-1).split(".");if(void 0!==e[t[0]]){a=e[t[0]];for(let e=1;e<t.length;e++){if(!a.hasOwnProperty(t[e])){return{suggestions:r}}a=a[t[e]]}}}if(void 0!==a)for(let e in a)if(a.hasOwnProperty(e)&&!e.startsWith("__")){const t=a[e].__completions;if(void 0!==t){if(delete t.range,"documentation"in t&&"object"!=typeof t.documentation){let e=t.documentation;t.documentation={value:e,isTrusted:!0,supportsHtml:!0}}r.push(t)}}return{suggestions:r}}})}function s(e,t){o.languages.registerHoverProvider("twig",{provideHover:function(t,n){const i=t.getValueInRange({startLineNumber:n.lineNumber,startColumn:0,endLineNumber:n.lineNumber,endColumn:t.getLineMaxColumn(n.lineNumber)}),l=t.getWordAtPosition(n);if(null===l)return;let s=i.substring(0,l.endColumn-1),r=!1,a=e;for(let e=s.length;e>=0;e--)if(" "===s[e]){s=i.substring(e+1,s.length);break}if(s.includes(".")&&(r=!0),r){const e=s.substring(0,s.length).split(".");for(let t=0;t<e.length-1;t++){const n=e[t].replace(/[{(<]/,"");if(!a.hasOwnProperty(n))return;a=a[n]}}if(void 0!==a&&void 0!==a[l.word]){const e=a[l.word].__completions;if(void 0!==e){let t=e.documentation;"object"==typeof e.documentation&&(t=e.documentation.value);return{range:new o.Range(n.lineNumber,l.startColumn,n.lineNumber,l.endColumn),contents:[{value:"**"+e.detail+"**"},{value:t}]}}}}})}const r={twig:'<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 320 320" style="enable-background:new 0 0 320 320;" xml:space="preserve">\n<style type="text/css">.st0{fill:currentcolor;}</style>\n<g>\n\t<path class="st0" d="M128,35.6c-17.7,0-32,15.9-32,35.6v35.6c0,29.5-21.5,53.3-48,53.3c26.5,0,48,23.9,48,53.3v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V320H96c-35.3,0-64-31.9-64-71.1v-35.6c0-19.6-14.3-35.6-32-35.6v-35.6c17.7,0,32-15.9,32-35.6V71.1\n\t\tC32,31.9,60.7,0,96,0h32V35.6L128,35.6z"/>\n\t<path class="st0" d="M320,177.8c-17.7,0-32,15.9-32,35.6v35.6c0,39.2-28.7,71.1-64,71.1h-32v-35.6c17.7,0,32-15.9,32-35.6v-35.6\n\t\tc0-29.5,21.5-53.3,48-53.3c-26.5,0-48-23.9-48-53.3V71.1c0-19.6-14.3-35.6-32-35.6V0h32c35.3,0,64,31.9,64,71.1v35.6\n\t\tc0,19.6,14.3,35.6,32,35.6V177.8L320,177.8z"/>\n</g>\n</svg>'},a={language:"twig",theme:"vs",automaticLayout:!0,tabIndex:0,lineNumbers:"off",glyphMargin:!1,folding:!1,lineDecorationsWidth:0,lineNumbersMinChars:0,renderLineHighlight:"none",wordWrap:"on",scrollBeyondLastLine:!1,scrollbar:{vertical:"hidden",horizontal:"auto",alwaysConsumeMouseWheel:!1,handleMouseWheel:!1},fontSize:14,fontFamily:'SFMono-Regular, Consolas, "Liberation Mono", Menlo, Courier, monospace',minimap:{enabled:!1}};function d(e,t,n,i,d,c,u=""){const m=document.getElementById(e),f=document.createElement("div"),g=JSON.parse(d),p=e+"-monaco-editor-placeholder";if(null===m||null===m.parentNode)return;const h=JSON.parse(i);let w={...a,...h,value:m.value};f.id=e+"-monaco-editor",f.classList.add("relative","box-content","monaco-editor-twigfield","h-full");const v=void 0===w.language?null:r[w.language];if(v){const e=document.createElement("div");e.classList.add("monaco-editor-twigfield--icon"),e.setAttribute("title",Craft.t("twigfield","Twig code is supported.")),e.setAttribute("aria-hidden","true"),e.innerHTML=v,f.appendChild(e)}if(""!==n){const e=f.classList,t=n.trim().split(/\s+/);e.add(...t)}if(""!==u){let t=document.createElement("div");t.id=e+"-monaco-editor-placeholder",t.innerHTML=u,t.classList.add("monaco-placeholder","p-2"),f.appendChild(t)}m.parentNode.insertBefore(f,m),m.style.display="none";let y=o.editor.create(f,w);if(y.onDidChangeModelContent((()=>{m.value=y.getValue()})),"singleLineEditor"in g&&g.singleLineEditor){const e=y.getModel();if(null!==e){const t=e.getValue();e.setValue(t.replace(/\s\s+/g," ")),y.addCommand(o.KeyMod.CtrlCmd|o.KeyCode.KeyF,(()=>{})),y.addCommand(o.KeyCode.Enter,(()=>{}),"!suggestWidgetVisible"),y.addCommand(o.KeyCode.Tab,(()=>{!function(){const e=L();if(document.activeElement instanceof HTMLFormElement){const t=e.indexOf(document.activeElement);if(t>-1){(e[t+1]||e[0]).focus()}}}()})),y.addCommand(o.KeyMod.Shift|o.KeyCode.Tab,(()=>{!function(){const e=L();if(document.activeElement instanceof HTMLFormElement){const t=e.indexOf(document.activeElement);if(t>-1){(e[t-1]||e[e.length]).focus()}}}()})),y.onDidPaste((()=>{let t="";const n=e.getLineCount();for(let o=0;o<n;o+=1)t+=e.getLineContent(o+1);t=t.replace(/\s\s+/g," "),e.setValue(t),y.setPosition({column:t.length+1,lineNumber:1})}))}}!function(e="Twigfield",t="",n){const o=new URLSearchParams;void 0!==e&&o.set("fieldType",e),void 0!==t&&o.set("twigfieldOptions",t);const i=n.includes("?")?"&":"?";if(void 0===window.twigfieldFieldTypes&&(window.twigfieldFieldTypes={}),e in window.twigfieldFieldTypes)return;window.twigfieldFieldTypes[e]=e;let r=new XMLHttpRequest;r.open("GET",n+i+o.toString(),!0),r.onload=function(){if(r.status>=200&&r.status<400){const e=JSON.parse(r.responseText);void 0===window.monacoAutocompleteItems&&(window.monacoAutocompleteItems={});for(const[t,n]of Object.entries(e))n.name in window.monacoAutocompleteItems||(window.monacoAutocompleteItems[n.name]=n.name,l(n.__completions,n.type,n.hasSubProperties),s(n.__completions,n.type))}else console.log("Autocomplete endpoint failed with status "+r.status)},r.send()}(t,d,c);let b=!1;const C=()=>{const e=y.getLayoutInfo().width,t=Math.min(1e3,y.getContentHeight());f.style.height=`${t}px`;try{b=!0,y.layout({width:e,height:t})}finally{b=!1}};function L(){let e=[];if(document.activeElement instanceof HTMLFormElement){const t=document.activeElement;t&&t.form&&(e=Array.prototype.filter.call(t.form.querySelectorAll('a:not([disabled]), button:not([disabled]), select:not([disabled]), input[type=text]:not([disabled]), [tabindex]:not([disabled]):not([tabindex="-1"])'),(function(e){return e instanceof HTMLElement&&(e.offsetWidth>0||e.offsetHeight>0||e===document.activeElement)})))}return e}function x(e,t){if(""===t){const t=document.querySelector(e);null!==t&&(t.style.display="initial")}}y.onDidContentSizeChange(C),C(),""!==u&&(x("#"+p,y.getValue()),y.onDidBlurEditorWidget((()=>{x("#"+p,y.getValue())})),y.onDidFocusEditorWidget((()=>{!function(e){const t=document.querySelector(e);null!==t&&(t.style.display="none")}("#"+p)})))}""===n.p&&(n.p=window.twigfieldBaseAssetsUrl),window.makeMonacoEditor=d}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[216,532],(function(){return t(5053),t(6674),t(1828)}));e.O()}]);
//# sourceMappingURL=codefield-editor.js.map